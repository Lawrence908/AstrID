@startuml AstrID Linear Tickets Mapping
!theme cerulean
skinparam backgroundColor #0D1117
skinparam defaultFontName Arial
skinparam defaultFontSize 12

title AstrID Linear Tickets Mapping to Architecture

package "Phase 1: Foundation (P1 Critical)" {
    [ASTR-69: Dev Environment] as ASTR69
    [ASTR-70: Database Setup] as ASTR70
    [ASTR-73: Observation Models] as ASTR73
    [ASTR-84: Core API] as ASTR84
    [ASTR-93: Test Framework] as ASTR93
    [ASTR-98: Observability Baseline] as ASTR98
}

package "Phase 2: Core Features (P2 High)" {
    [ASTR-71: Cloud Storage] as ASTR71
    [ASTR-74: Survey Integration] as ASTR74
    [ASTR-75: FITS Processing] as ASTR75
    [ASTR-76: Image Preprocessing] as ASTR76
    [ASTR-78: Image Differencing] as ASTR78
    [ASTR-80: U-Net Integration] as ASTR80
    [ASTR-88: MLflow Setup] as ASTR88
    [ASTR-91: Workflow Orchestration] as ASTR91
    [ASTR-99: Reference Image Service] as ASTR99
}

package "Phase 3: Advanced Features (P3 Medium)" {
    [ASTR-82: Human Validation] as ASTR82
    [ASTR-83: Data Cataloging] as ASTR83
    [ASTR-86: Frontend Dashboard] as ASTR86
    [ASTR-97: Production Deployment] as ASTR97
    [ASTR-100: Rate Limiting & Backoff] as ASTR100
}

package "Architecture Components" {
    [Database Layer] as DB
    [Storage Layer] as Storage
    [API Layer] as API
    [ML Infrastructure] as ML
    [Workflow Engine] as Workflow
    [Frontend] as Frontend
}

' Phase 1 mappings
ASTR69 --> DB : "Setup"
ASTR69 --> Storage : "Setup"
ASTR69 --> API : "Setup"
ASTR69 --> ML : "Setup"
ASTR69 --> Workflow : "Setup"

ASTR70 --> DB : "Schema & Migrations"

ASTR73 --> DB : "Domain Models"

ASTR84 --> API : "Endpoints"

ASTR93 --> DB : "Test Fixtures"
ASTR93 --> API : "Test Suite"
ASTR98 --> Workflow : "Metrics/Tracing"

' Phase 2 mappings
ASTR71 --> Storage : "R2 Integration"
ASTR74 --> Storage : "MAST/SkyView"
ASTR75 --> Storage : "FITS Processing"
ASTR76 --> Storage : "Image Processing"
ASTR78 --> Storage : "Differencing"
ASTR80 --> ML : "Model Integration"
ASTR88 --> ML : "Experiment Tracking"
ASTR91 --> Workflow : "Prefect/Dramatiq"
ASTR99 --> Storage : "Ref Images"

' Phase 3 mappings
ASTR82 --> Frontend : "Validation UI"
ASTR83 --> Storage : "Analytics"
ASTR86 --> Frontend : "Dashboard"
ASTR97 --> API : "Production Config"
ASTR97 --> Storage : "Production Config"
ASTR97 --> Workflow : "Production Config"
ASTR100 --> API : "Rate Limiting"

' Dependencies
ASTR69 --> ASTR70 : "depends on"
ASTR70 --> ASTR73 : "depends on"
ASTR73 --> ASTR84 : "depends on"
ASTR69 --> ASTR93 : "depends on"

ASTR71 --> ASTR74 : "enables"
ASTR73 --> ASTR75 : "enables"
ASTR75 --> ASTR76 : "enables"
ASTR76 --> ASTR78 : "enables"
ASTR78 --> ASTR80 : "enables"
ASTR71 --> ASTR88 : "enables"
ASTR69 --> ASTR91 : "enables"
ASTR99 --> ASTR78 : "supports"
ASTR98 --> ASTR91 : "supports"

ASTR80 --> ASTR82 : "enables"
ASTR82 --> ASTR83 : "enables"
ASTR84 --> ASTR86 : "enables"
ASTR91 --> ASTR97 : "enables"
ASTR100 --> ASTR84 : "supports"

@enduml
