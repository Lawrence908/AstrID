## ASTR-105: Testing & Diagnostics Page (P3) - Frontend UI

### Context & Goal
Provide a dedicated page in the dashboard to run smoke checks, view system health, and troubleshoot issues without leaving the UI. This consolidates backend health checks (API/DB/storage/MLflow/Prefect), worker/queue status, and quick diagnostics into one place.

### Technical Requirements

- Project: ASTRID-API
- Priority: P3 (Medium)
- Labels: `ui`, `frontend`, `testing`, `ops`
- Dependencies: ASTR-84 (Core API), ASTR-93 (Test Framework)
- Estimated Time: 2 days

### Scope

1) Page & Navigation
- Route: `/dashboard/testing`
- Link from main dashboard and Workers page
- Sections: System Health, Workers & Queues, Storage/MLflow, API Smoke, Recent Results

2) Health & Diagnostics (Read-only MVP)
- System Health:
  - API `/health` and deeper `/status` (if available)
  - Database connectivity (latency + read query)
  - Storage connectivity (head/list test)
  - MLflow server health
  - Prefect API/server health
- Workers & Queues:
  - List worker types, queue depth, processing rate, error rate
  - Degraded banner when any critical check fails

3) Test Execution Controls (Client-side)
- Buttons for: Run All, Run Selected Tests
- Tests map to existing backend endpoints (no long-running jobs)
- Live log panel and toast notifications
- Persist last run results in localStorage and allow download JSON

4) UX & Performance
- Polling interval selector (off/15s/30s/60s)
- Pause/Resume polling
- Error boundaries and retry with backoff
- Accessible color coding for status (healthy/degraded/unhealthy)

### Non-Goals (Phase 1)
- No destructive queue actions (clear/scale/stop) — those live in ASTR-104
- No E2E test orchestration; this is a diagnostics surface
- No auth role changes; respects existing auth

### API Endpoints (Expected)
- `GET /health` — API health
- `GET /status` — composite status (if available)
- `GET /workers/status` — workers & queues (read-only)
- `GET /storage/health` — storage connectivity
- `GET /mlflow/health` — MLflow server health
- `GET /prefect/health` — Prefect server health

If any endpoint is missing, stub with placeholders and follow-up API ticket.

### Acceptance Criteria
- `/dashboard/testing` renders and shows live health across API/DB/storage/MLflow/Prefect
- Workers/queues status visible, with degraded banner on failures
- Run All / Run Selected executes checks and displays results/logs
- Results persist locally and downloadable as JSON
- Page linked from main dashboard and Workers page

### Implementation Plan
- Create page component and layout
- Build HealthCard components per service with status + details
- Implement polling controller + pause/resume
- Integrate notifications and error states
- Add local persistence and export

### Follow-ups
- ASTR-104 for worker quick actions (start/stop/scale/clear)
- Add server-side short diagnostics endpoint if gaps exist
- Consider role-based visibility for ops data
